{% extends 'base.html' %}
{% load crispy_forms_tags %}
{%block content%}
    <div class="card">
        <div class="card-body">
            <div class="media">
                <div class="media-body">
                    <h2 class="account-heading">{{ user.username }}</h2>
                    <p class="text-secondary">{{ user.email }}</p>
                    <p class="text-secondary">{{ user.area }}</p>
                    <p class="text-secondary">{{ user.city }}</p>
                    <p class="text-secondary">{{ user.zipcode }}</p>
                </div>
            </div>
        </div>
    </div>
    <br>

    <!-- For super users -->
    {% if user.is_authenticated and user.is_superuser %}
    <div class="card">
        <div class="card-body">
            <h4>Waste</h4>
            <table class="table table-hover">
                <thead>
                  <tr>
                    <th>Id</th>
                    <th>Type</th>
                    <th>Date</th>
                    <th>Quantity</th>
                  </tr>
                </thead>
            
                <tbody>
            
                  {% for waste in waste_list_admin %}
            
                  <tr>
                    <td>{{ waste.waste_id }}
                    <td>{{ waste.type_waste }}</td>
                    <td>{{ waste.created_date }} </td>
                    <td>{{ waste.quantity }}</td>
                  </tr>
            
                  {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <br>

    <div class="card">
        <div class="card-body">
            <h4>Transport Vehicle</h4>
            <table class="table table-hover">
                <thead>
                  <tr>
                    <th>Id</th>
                    <th>Plate Number</th>
                    <th>Capacity</th>
                    <th>Pincode assigned to</th>
                  </tr>
                </thead>
            
                <tbody>
            
                  {% for tv in tv_list %}
            
                  <tr>
                    <td>{{ tv.tv_id }}
                    <td>{{ tv.plate_number }}</td>
                    <td>{{ tv.capacity }} </td>
                    <td>{{ tv.pincode }}</td>
                  </tr>
            
                  {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <br>

    <div class="card">
        <div class="card-body">
            <h4>Processing Plant</h4>
            <table class="table table-hover">
                <thead>
                  <tr>
                    <th>Id</th>
                    <th>Name</th>
                    <th>Total Waste*</th>
                    <th>Landill Waste*</th>
                  </tr>
                </thead>
            
                <tbody>
            
                  {% for pp in pp_list %}
            
                  <tr>
                    <td>{{ pp.pp_id }}
                    <td>{{ pp.ppname }}</td>
                    <td>{{ pp.total_waste }} </td>
                    <td>{{ pp.landfill_waste }}</td>
                  </tr>
            
                  {% endfor %}
                </tbody>
            </table>
            <p>*Total Waste - Total waste collected by the Processing plant until now</p>
            <p>*Landfill Waste - Total waste sent to Landfill until now</p>
        </div>
    </div>
    <br>

    <div class="card">
        <div class="card-body">
            <h4>Landill</h4>
            <table class="table table-hover">
                <thead>
                  <tr>
                    <th>Id</th>
                    <th>Name</th>
                    <th>Maximum Capacity</th>
                    <th>Capacity Filled</th>
                  </tr>
                </thead>
            
                <tbody>
            
                  {% for lf in lf_list %}
            
                  <tr>
                    <td>{{ lf.lf_id }}
                    <td>{{ lf.lfname }}</td>
                    <td>{{ lf.maximum_capacity }}</td>
                    <td>{{ lf.capacity_filled }}</td>
                  </tr>
            
                  {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <br>
    {% endif %}

    <!-- For normal users -->
    {% if user.is_authenticated and not user.is_superuser %}
    <div class="card">
        <div class="card-body">
            <div class="media">
                <div class="media-body">
                    <h4><b>Want To fill the Waste Generation Form:</b></h4>
                    <br><br>
                    <a href="{% url 'waste_form' %}" class="btn btn-outline-info">Fill Now</a>
                </div>
            </div>
        </div>
    </div>
    <br>
    <div class="card">
        <div class="card-body">
            <div class="media">
                <div class="media-body">
                    <h4><strong>List of waste forms filled:</strong></h4>
                    <br>
                    {%for waste in waste_list%}
                        <div class="card">
                            <div class="card-body">
                                <div class="card-title">
                                    <h4>ID : {{waste.waste_id}}</h4>
                                    <p>Date : {{waste.created_date|date:"d F,Y"}}</p>
                                    <p>Type of Waste : {{waste.type_waste}}</p>
                                    <p>Quantity : {{waste.quantity}}</p>  
                                </div>
                            </div>
                        </div>
                        <br>
                    {%endfor%}
                </div>
            </div>
        </div>
    </div>
    {% endif %}
{%endblock content%}